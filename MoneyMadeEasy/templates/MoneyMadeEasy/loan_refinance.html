{% extends "MoneyMadeEasy/layout.html" %}
{% load static %}

<!-- JS section to (1) compute refinanced loan payments and (2) add loans to expenses list -->
{% block script %}
    <script src="{% static 'MoneyMadeEasy/loan_refinance.js' %}"></script>
{% endblock %}

<!-- Form to refinance an existing loan w/ a new interest rate -->
{% block body %}
    <form id="form_compute_loan">
        <h3>Refinance an Existing Loan</h3>
        <ul>
            <li>
                Original Loan Amount ($): <input type="number" id="amount" placeholder="Original Loan Amount ($)" min="0.01" step="0.01">
            </li>
            <li>
                Loan Period (Yrs): <input type="number" id="period" placeholder="Loan Period (Yrs.)" min="1" step="1">
            </li>
            <li>
                Original Annual IR (%): <input type="number" id="IR_old" placeholder="Original Annual Interest Rate (%)" min="0.01" step="0.01">
            </li>
            <li>
                <label for="frequency">Payment Frequency: </label>
                <select id="frequency">
                    <option value="None">Select an option...</option>
                    <option value="12">Monthly</option>
                    <option value="6">Every Two Months</option>
                    <option value="4">Every Three Months</option>
                    <option value="2">Every Six Months</option>
                    <option value="1">Annually</option>
                </select>
            </li>
            <li>
                <label for="start">First Payment Was: </label>
                <select id="start">
                    <option value="None">Select an option...</option>
                    <option value="immediate">Immediate</option>
                    <option value="deferred">Deferred</option>
                </select>
            </li>
            <li>
                Number of Payments Made: <input type="number" id="num_payments" placeholder="Number of Payments Made" min="1" step="1">
            </li>
            <hr>
            <li>
                <label for="last_payment">Last Payment Was __ Month(s) Ago:</label>
                <select id="last_payment">
                    <option value="None">Select an option...</option>
                    <option value="0">0</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
            </li>
            <li>
                <label for="next_payment">Next Payment Due in __ Month(s):</label>
                <select id="next_payment">
                    <option value="None">Select an option...</option>
                    <option value="0">Due Immediate</option>
                    <option value="1">1</option>
                    <option value="2">2</option>
                    <option value="3">3</option>
                    <option value="4">4</option>
                    <option value="5">5</option>
                    <option value="6">6</option>
                    <option value="7">7</option>
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                </select>
            </li>
            <li>
                New Annual IR (%): <input type="number" id="IR_new" placeholder="New Annual Interest Rate (%)" min="0.01" step="0.01">
            </li>
        </ul>
        <input type="submit" value="Calculate New Payment">
    </form>
    <h4 id="payment_display">New Monthly Payment: $0.00</h4>

     <!-- Form to add this^^ loan to monthly expenses list -->
     <form id="form_add_loan" action="{% url 'add_expense' %}" method="POST">
        {% csrf_token %}
        <input type="hidden" name="user_ID" value="{{ request.user.id }}">
        <input type="hidden" name="name" id="loan_name" value="(INSERT LOAN NAME HERE)">
        <input type="hidden" name="category" value="Loan">
        <input type="hidden" name="amount" id="loan_amount" value="0.00">
        <input type="submit" value="Add to Monthly Expenses">
    </form>
    <br>
    <a href="{% url 'loan_new' %}">Calculate a New Loan?</a>
{% endblock %}